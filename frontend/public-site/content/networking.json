{
  "id": "networking",
  "title": "üåê Networking",
  "icon": "üåê",
  "content": [
    { "type": "heading", "text": "Peer-to-Peer Sync" },
    { "type": "paragraph", "text": "Nightjar uses Hyperswarm for peer-to-peer discovery and data sync. When possible, data travels directly between devices with no server involved." },
    { "type": "heading", "text": "Relay Fallback" },
    { "type": "paragraph", "text": "When direct P2P connections aren't possible (e.g., behind strict NATs or firewalls), Nightjar automatically routes through relay servers. Relays only forward encrypted data ‚Äî they cannot read it." },
    { "type": "paragraph", "text": "Relay connections are authenticated using HMAC-SHA256 tokens derived from the workspace encryption key. Both the desktop sidecar and web clients compute identical tokens so the relay server can verify that only authorized participants join a room. The first client to present a token registers it (first-write-wins); all subsequent clients must present a matching token or the server rejects them with a 4403 close code." },
    { "type": "heading", "text": "File Transfer (All Platforms)" },
    { "type": "paragraph", "text": "File storage transfers work across every combination of web and desktop clients. Files are split into 1 MB chunks, encrypted with XSalsa20-Poly1305, and exchanged peer-to-peer. On web, chunks travel through the relay server (WebSocket) or via WebRTC data channels negotiated through the signaling server. On desktop, Hyperswarm provides a direct DHT-based path in addition to the relay and WebRTC options." },
    { "type": "heading", "text": "Network Settings (Desktop)" },
    { "type": "paragraph", "text": "In the desktop app, go to Settings ‚Üí Network to configure:" },
    { "type": "list", "items": [
      "Relay server URLs ‚Äî Add or change relay endpoints.",
      "Peer status poll interval ‚Äî How often to check for connected peers.",
      "Connection timeout settings.",
      "Sync verification ‚Äî Confirm data integrity with connected peers."
    ]},
    { "type": "screenshot", "id": "sharing-panel", "caption": "The Settings panel with network, notification, and appearance configuration." },
    { "type": "heading", "text": "Tor Support (Desktop)" },
    { "type": "paragraph", "text": "The desktop app supports routing connections through the Tor network for enhanced privacy. Enable it in Settings ‚Üí Desktop. Nightjar bundles a Tor client ‚Äî no external setup required." },
    { "type": "tip", "text": "The status bar at the bottom shows your current peer count and connection status. Hover for details." }
  ]
}
